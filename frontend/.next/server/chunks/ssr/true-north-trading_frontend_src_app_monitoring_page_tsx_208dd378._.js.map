{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/MikeyW/true-north-trading/frontend/src/app/monitoring/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { api } from \"@/lib/api\";\nimport {\n  BellIcon,\n  ExclamationTriangleIcon,\n  CheckCircleIcon,\n  InformationCircleIcon,\n  XCircleIcon,\n  FunnelIcon,\n  ArrowPathIcon,\n  ClockIcon,\n} from \"@heroicons/react/24/outline\";\nimport { motion } from \"framer-motion\";\n\ninterface Alert {\n  id: string;\n  title: string;\n  message: string;\n  severity: string;\n  timestamp: string;\n  symbol?: string;\n}\n\nexport default function MonitoringPage() {\n  const [alerts, setAlerts] = useState<Alert[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState<string>(\"all\");\n  const [autoRefresh, setAutoRefresh] = useState(true);\n\n  useEffect(() => {\n    loadAlerts();\n\n    // Auto-refresh every 30 seconds if enabled\n    if (autoRefresh) {\n      const interval = setInterval(loadAlerts, 30000);\n      return () => clearInterval(interval);\n    }\n  }, [autoRefresh]);\n\n  const loadAlerts = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(\"http://localhost:8002/api/alerts\");\n      const data = await response.json();\n      setAlerts(data);\n    } catch (error) {\n      console.error(\"Failed to load alerts:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredAlerts = alerts.filter((alert) => {\n    if (filter === \"all\") return true;\n    return alert.severity.toLowerCase() === filter;\n  });\n\n  const getSeverityIcon = (severity: string) => {\n    switch (severity.toLowerCase()) {\n      case \"critical\":\n        return <XCircleIcon className=\"h-6 w-6 text-red-600\" />;\n      case \"high\":\n        return <ExclamationTriangleIcon className=\"h-6 w-6 text-orange-600\" />;\n      case \"medium\":\n        return <InformationCircleIcon className=\"h-6 w-6 text-yellow-600\" />;\n      case \"low\":\n        return <CheckCircleIcon className=\"h-6 w-6 text-blue-600\" />;\n      default:\n        return <BellIcon className=\"h-6 w-6 text-gray-600\" />;\n    }\n  };\n\n  const getSeverityBadgeColor = (severity: string) => {\n    switch (severity.toLowerCase()) {\n      case \"critical\":\n        return \"bg-red-100 text-red-800 border-red-200\";\n      case \"high\":\n        return \"bg-orange-100 text-orange-800 border-orange-200\";\n      case \"medium\":\n        return \"bg-yellow-100 text-yellow-800 border-yellow-200\";\n      case \"low\":\n        return \"bg-blue-100 text-blue-800 border-blue-200\";\n      default:\n        return \"bg-gray-100 text-gray-800 border-gray-200\";\n    }\n  };\n\n  const getSeverityBgColor = (severity: string) => {\n    switch (severity.toLowerCase()) {\n      case \"critical\":\n        return \"bg-red-50 border-red-200\";\n      case \"high\":\n        return \"bg-orange-50 border-orange-200\";\n      case \"medium\":\n        return \"bg-yellow-50 border-yellow-200\";\n      case \"low\":\n        return \"bg-blue-50 border-blue-200\";\n      default:\n        return \"bg-gray-50 border-gray-200\";\n    }\n  };\n\n  const getTimeAgo = (timestamp: string) => {\n    const now = new Date();\n    const time = new Date(timestamp);\n    const diff = now.getTime() - time.getTime();\n\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    const days = Math.floor(diff / 86400000);\n\n    if (days > 0) return `${days}d ago`;\n    if (hours > 0) return `${hours}h ago`;\n    if (minutes > 0) return `${minutes}m ago`;\n    return \"Just now\";\n  };\n\n  const alertCounts = {\n    critical: alerts.filter((a) => a.severity.toLowerCase() === \"critical\")\n      .length,\n    high: alerts.filter((a) => a.severity.toLowerCase() === \"high\").length,\n    medium: alerts.filter((a) => a.severity.toLowerCase() === \"medium\").length,\n    low: alerts.filter((a) => a.severity.toLowerCase() === \"low\").length,\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow-sm border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex justify-between items-center\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">\n                Monitoring & Alerts\n              </h1>\n              <p className=\"mt-1 text-sm text-gray-600\">\n                Real-time alerts and notifications for your portfolio\n              </p>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={() => setAutoRefresh(!autoRefresh)}\n                className={`px-4 py-2 rounded-lg border font-medium text-sm ${\n                  autoRefresh\n                    ? \"bg-green-50 text-green-700 border-green-200\"\n                    : \"bg-gray-50 text-gray-700 border-gray-200\"\n                }`}\n              >\n                {autoRefresh ? \"Auto-refresh ON\" : \"Auto-refresh OFF\"}\n              </button>\n              <button\n                onClick={loadAlerts}\n                disabled={loading}\n                className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50\"\n              >\n                <ArrowPathIcon\n                  className={`h-5 w-5 mr-2 ${loading ? \"animate-spin\" : \"\"}`}\n                />\n                Refresh\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Alert Stats */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-red-600\">Critical</p>\n                <p className=\"text-2xl font-bold text-red-900\">\n                  {alertCounts.critical}\n                </p>\n              </div>\n              <XCircleIcon className=\"h-8 w-8 text-red-600\" />\n            </div>\n          </div>\n\n          <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-orange-600\">High</p>\n                <p className=\"text-2xl font-bold text-orange-900\">\n                  {alertCounts.high}\n                </p>\n              </div>\n              <ExclamationTriangleIcon className=\"h-8 w-8 text-orange-600\" />\n            </div>\n          </div>\n\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-yellow-600\">Medium</p>\n                <p className=\"text-2xl font-bold text-yellow-900\">\n                  {alertCounts.medium}\n                </p>\n              </div>\n              <InformationCircleIcon className=\"h-8 w-8 text-yellow-600\" />\n            </div>\n          </div>\n\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-blue-600\">Low</p>\n                <p className=\"text-2xl font-bold text-blue-900\">\n                  {alertCounts.low}\n                </p>\n              </div>\n              <CheckCircleIcon className=\"h-8 w-8 text-blue-600\" />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-6\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4\">\n          <div className=\"flex items-center space-x-4\">\n            <FunnelIcon className=\"h-5 w-5 text-gray-400\" />\n            <div className=\"flex space-x-2\">\n              {[\n                { value: \"all\", label: \"All Alerts\" },\n                { value: \"critical\", label: \"Critical\" },\n                { value: \"high\", label: \"High\" },\n                { value: \"medium\", label: \"Medium\" },\n                { value: \"low\", label: \"Low\" },\n              ].map((filterOption) => (\n                <button\n                  key={filterOption.value}\n                  onClick={() => setFilter(filterOption.value)}\n                  className={`px-3 py-1 rounded-md text-sm font-medium ${\n                    filter === filterOption.value\n                      ? \"bg-blue-100 text-blue-700\"\n                      : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                  }`}\n                >\n                  {filterOption.label}\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Alerts List */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">\n              Recent Alerts ({filteredAlerts.length})\n            </h2>\n          </div>\n\n          <div className=\"divide-y divide-gray-200\">\n            {loading ? (\n              <div className=\"p-8 text-center\">\n                <ArrowPathIcon className=\"h-8 w-8 text-blue-600 animate-spin mx-auto mb-3\" />\n                <p className=\"text-gray-600\">Loading alerts...</p>\n              </div>\n            ) : filteredAlerts.length > 0 ? (\n              filteredAlerts.map((alert, index) => (\n                <motion.div\n                  key={alert.id}\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ duration: 0.3, delay: index * 0.03 }}\n                  className={`p-6 border-l-4 ${getSeverityBgColor(\n                    alert.severity\n                  )}`}\n                >\n                  <div className=\"flex items-start space-x-4\">\n                    <div className=\"flex-shrink-0 mt-1\">\n                      {getSeverityIcon(alert.severity)}\n                    </div>\n\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center space-x-3 mb-2\">\n                        <h3 className=\"text-lg font-semibold text-gray-900\">\n                          {alert.title}\n                        </h3>\n                        <span\n                          className={`px-2 py-0.5 rounded-full text-xs font-medium border ${getSeverityBadgeColor(\n                            alert.severity\n                          )}`}\n                        >\n                          {alert.severity.toUpperCase()}\n                        </span>\n                        {alert.symbol && (\n                          <span className=\"px-2 py-0.5 rounded bg-gray-100 text-gray-800 text-xs font-medium\">\n                            {alert.symbol}\n                          </span>\n                        )}\n                      </div>\n\n                      <p className=\"text-gray-700 mb-3\">{alert.message}</p>\n\n                      <div className=\"flex items-center text-sm text-gray-500\">\n                        <ClockIcon className=\"h-4 w-4 mr-1\" />\n                        {getTimeAgo(alert.timestamp)} â€¢{\" \"}\n                        {new Date(alert.timestamp).toLocaleString()}\n                      </div>\n                    </div>\n                  </div>\n                </motion.div>\n              ))\n            ) : (\n              <div className=\"p-12 text-center\">\n                <BellIcon className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n                <p className=\"text-gray-600 font-medium\">No alerts found</p>\n                <p className=\"text-sm text-gray-500 mt-1\">\n                  {filter !== \"all\"\n                    ? \"Try selecting a different severity filter\"\n                    : \"Your monitoring system is working. New alerts will appear here.\"}\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}